<!DOCTYPE html><html><head><title>Web-Mapping Quickstart: Session 3</title><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
<link href='../../big.css' rel='stylesheet' type='text/css' />
<style>
  .osmfail {
    background-image: url(./images/osmfail.png);
    background-repeat: no-repeat;
    background-position: center 1px;
  }
  .leaflet-gj {
    background-image: url(./images/leaflet-gj.png);
    background-repeat: no-repeat;
    background-position: center 1px;
  }
  .geojson {
    background-image: url(./images/geojson.png);
    background-repeat: no-repeat;
    background-position: center 1px;
  }
  .featurecollection {
    background-image: url(./images/featurecollection.png);
    background-repeat: no-repeat;
    background-position: center 1px;
  }
  .earthquakedata {
    background-image: url(./images/earthquakedata.png);
    background-repeat: no-repeat;
    background-position: center 1px;
  }
  .earthquakegj {
    background-image: url(./images/earthquakegj.png);
    background-repeat: no-repeat;
    background-position: center 1px;
  }
  .earthquakesgist {
    background-image: url(./images/earthquakesgist.png);
    background-repeat: no-repeat;
    background-position: center 1px;
  }
  .gistmap {
    background-image: url(./images/gistmap.png);
    background-repeat: no-repeat;
    background-position: center 1px;
  }
  .earthquakeprops {
    background-image: url(./images/earthquakeprops.png);
    background-repeat: no-repeat;
    background-position: center 1px;
  }
</style>
<script src='../../big.js'></script>
</head><body>

<div>Web Mapping <em>Quickstart</em></div>
<div>This is our <strong>last week together</strong>. <em>:(</em></div>
<div>So let's go out with a <strong>bang</strong>!</div>
<div>Today is <em>Session 4:</em> Advanced Web Mapping</div>
<div><strong>Follow along</strong> by opening <em>Chrome</em> and typing this:<br><br><pre>http://mizmay.github.io<br>/web-map-quickstart<br>/fall2014/session-4</pre></div>
<div>Wherever you see text like <a href='#'>this</a>, it's a <strong>link</strong>.</div>
<div>At this point, we've done a <strong>solid overview</strong> of <em>major concepts and pieces</em> of the <strong>web mapping</strong> space.</div>
<div>Things we said we <em>won't</em> cover:</div>
<div><strong>GIS</strong> and <strong>data wrangling</strong></div>
<div><em>Web servers</em> and what is required to set up a system for <strong>collecting data</strong>.</div>
<div>But there are <em>a couple/few things</em> about <strong>data</strong> that are <em>useful</em> in <strong>web mapping</strong>.</div>
<div>In general, we should all know <em>more</em> about <strong>geographic data</strong>.</div>
<div>Why? Because web maps are <em>picky</em> and <strong>tempermental</strong>.</div>
<div data-bodyclass='osmfail'></div>
<div>What makes data <em>geographic</em>?</div>
<div>It is <strong>information</strong> that has a <strong>location</strong> tied to it.</div>
<div>Geographic data can be <em>raster</em>(<strong>pixels</strong>) or <em>vector (<strong>points</strong>, <strong>lines</strong>, <strong>polygons</strong>) data.</div>
<div>Vectors first.</div>
<div>Vector geo data has <em>three</em> things: <strong>geometry</strong>, a <strong>location</strong>, and <strong>attribute information</strong>.</div>
<div>Most common: <em><a href='http://geojson.org'>GeoJSON</a></em>.</div>
<div>First we will talk about <strong>what</strong> makes <em>GeoJSON</em>, then we'll get to <strong>adding it to web maps</strong>.</div>
<div><strong>As mentioned</strong>, <em>GeoJSON</em> is an extension of a format called <a href="http://json.org">JSON</a>, which stands for <strong>JavaScript Object Notation</strong>.</div>
<div>Because <em>GeoJSON</em> is basically just <strong>JavaScript</strong>, it can easily be used in <em>web maps</em>!</div>
<div data-bodyclass='leaflet-gj'>For example, Leaflet loves GeoJSON.</div>
<div>Just <strong>for your information</strong>...</div>
<div>GeoJSON has some <strong>required attributes</strong>. GeoJSON features need a <em>type</em>, <em>geometry</em>, and <em>properties</em>.</div>
<div>(To learn more about GeoJSON's specificities, check out <a href="http://github.com/lyzidiamond/learn-geojson">Learn GeoJSON</a>. <strong>#shamelessplug</strong>)</div>
<div data-bodyclass='geojson'></div>
<div>Let's break it down.</div>
<div><em>JavaScript objects</em> exist of a series of <strong>key-value pairs</strong>.</div>
<div><pre><span><strong>"key"</strong>: "value"</span></pre></div>
<div><pre><span><strong>"name"</strong>: "Lyzi"</span></pre></div>
<div><pre><span>"key": <strong>"value"</strong></span></pre></div>
<div><pre><span>"name": <strong>"Lyzi"</strong></span></pre></div>
<div>A <em>geojson object</em> must have at least <strong>three</strong> specific key-value pairs.</div>
<div>First: <pre><span>"type": "Feature"</span></pre></div>
<div>Second: <pre><span>"geometry"</span></pre></div>
<div>The value in the key-value pair for <pre><span>"geometry"</span></pre> is actually an <em>object itself</em>.</div>
<div>That object includes two things: <pre><span>"type"</span></pre> and <pre><span>"coordinates"</span></pre></div>
<div><pre><span>"type": "Point"</span></pre><pre><span>"Point"</span></pre> can be <pre><span>"Polygon"</span></pre><pre><span>"LineString"</span></pre> or any other supported geometry type.</div>
<div>See the <a href="http://geojson.org">specification</a> for a full list of geometry types.</div>
<div><pre><span>"coordinates": [ -122.65, 45.51 ]</span></pre></div>
<div>For <em>lines</em> or <em>polygons</em>, this will be a <strong>series of coordinate pairs</strong>.</div>
<div>All together now: <pre><span>"geometry": <br>  { "type": "Point",<br>    "coordinates": <br>      [ - 122.65, 45.51 ]<br>  }</span></pre></div>
<div>Third: <pre><span>"properties"</span></pre></div>
<div>Like <pre><span>"geometry"</span></pre><pre><span>"properties"</span></pre> also has an <em>object</em> as its value.</div>
<div>Inside of that object, you can add whatever properties you want.</div>
<div><pre><span>"properties":<br>  { <br>    "name": "Lyzi", <br>    "age": 25, <br>    "city": "Oakland, CA" <br>  }</span></pre></div>
<div>This gives us a <strong>GeoJSON object</strong>:</div>
<div>Most GeoJSON datasets you will come across have <em>more than one</em> feature in them.</div>
<div>This is written as a <strong>FeatureCollection</strong> that contains all of the features.</div>
<div data-bodyclass='featurecollection'></div>
<div>The <em>features</em> are listed as an <strong>array</strong> of objects.</div>
<div><em>Arrays</em> are bookended by <strong>square brackets:</strong> <pre><span>[1, 4, 3]</span></pre></div>
<div>Now we know what a <em>GeoJSON</em> file looks like!</div>
<div><strong>Note:</strong> GeoJSON files can have three different file extensions: <em>.geojson</em>, <em>.json</em>, and <em>.js</em>.</div>
<div>How do we <strong>use</strong> a GeoJSON file?</div>
<div>Let me count the ways...</div>
<div>Let's first <em>download</em> a geojson file.</div>
<div>Head over to <a href="http://bit.ly/earthquake-data">bit.ly /earthquake-data</a>.</div>
<div>Scroll down and right-click to save the GeoJSON for <strong>Past Day M2.5+ earthquakes</strong>.</div>
<div data-bodyclass='earthquakedata'></div>
<div>Once you have it downloaded, <em>open it</em> in a text editor. Or, you can just <em>click</em> on the link to see it in the browser.</div>
<div data-bodyclass='earthquakegj'></div>
<div>This shows the <strong>earthquakes > magnitude 2.5 in the past day</strong>. Notice the <strong>geometry</strong> and <strong>properties</strong> for each one?</div>
<div>Now let's <strong>put them on a map</strong>. Head over to <a href="http://gist.github.com">gist.github.com</a>.</div>
<div><em>Quickly:</em> What is <strong>GitHub</strong>?</div>
<div><a href='http://github.com'>GitHub</a> is an <em>online repository</em> for <strong>code</strong> and a system for <em>collaborating</em> on projects.</div>
<div>It has <em>lots</em> of <strong>cool features</strong>, which we'll see here in <em>a minute</em>.</div>
<div><em>Copy</em> and <em>paste</em> the geojson into the box, either from the <strong>file</strong> or from the <strong>browser</strong>.</div>
<div>Where it says <strong>Name this file...</strong>, type <em>earthquakes.json</em>.</div>
<div data-bodyclass='earthquakesgist'></div>
<div>When you're done, click <strong>Create public gist</strong>.</div>
<div data-bodyclass='gistmap'>Woohoo!</div>
<div>If you <em>click</em> on one of the map markers, you will see the information in <strong>properties</strong> for each earthquake.</div>
<div data-bodyclass='earthquakeprops'></div>
<div>This map, like some of the others we've seen, is <strong>embeddable</strong>. Head to <a href="http://bit.ly/github-maps">bit.ly/github-maps</a> to learn more about that.</div>


<div>THIS IS WHERE THE UNEDITED MATERIAL STARTS</div>

<div>Let's say we want a <em>little</em> more customization of our map. We can use <strong>Mapbox</strong>'s in-browser editor.</div>
<div>Head over to <a href="http://mapbox.com/">mapbox.com</a>. If you have an account, log-in. If you don't, use this one: <pre><span>username: beginningmaps</span></pre><pre><span>password: maps4beginners</span></pre></div>
<div>Click <em>Projects</em> at the top, and then <em>Create Project</em>.</div>
<div><img src="./images/mapboxdata.png" />Click <strong>Data</strong> at the top, then <strong>import</strong>.</div>
<div>Select the <em>earthquakes GeoJSON file</em> you downloaded before.</div>
<div>You now have the option of selecting what <strong>property</strong> you'd like to use for popups, how you'd like to <strong>style</strong> your markers, and so on.</div>
<div><em>Make your selections</em> for each of the tabs and click <strong>Finish importing</strong>.</div>
<div><img src="./images/mapboxquakes.png" /></div>
<div>You can also <strong>customize the basemap</strong> using the <em>Style</em> tab at the top, and share the map via the <em>Project</em> tab.</div>





<div>THIS IS WHERE THE OLD MATERIAL STARTS</div>

<div>Welcome Back</div>
<div>Two weeks ago: <em>Session 1</em></div>
<div>Web mapping <em>platforms</em> and <em>projects</em></div>
<div>Last week: <em>Session 2</em></div>
<div>Web mapping from <em>scratch</em></div>
<div>This week: <em>Session 3</em></div>
<div>Advanced web mapping</div>
<div><ul><li><em>Design</em> and <em>cartography</em> principles for the web</li><li>More on <em>styling</em> and <em>interaction</em> (html, CSS, Javascript, CartoCSS)</li><li>Tilemill</li></div>
<div>In print cartography, there are dozens of map types:</div>
<div>Reference Maps</div>
<div><table><tr><td><img src="wayfinding.png"></td><td>Wayfinding</td></tr></table></div>
<div><img src="wayfinding2.png"></div>
<div><table><tr><td>Transit</td></tr><tr><td><img src="transit.png"></td></tr></table></div>
<div><table><tr><td>Navigation</td></tr><tr><td><img src="navigation.png"></td></tr></table></div>
<div><img src="bartmap.gif"></div>
<div><table><tr><td>Topographic</td></tr><tr><td><img src="topographic.png"></td></tr></table></div>
<div>Thematic Maps</div>
<div><img src="TeamGB_medalists.png"></div>
<div><img src="cartogram.jpg"></div>
<div><img src="dotdensity.png"></div>
<div><img src="dotmap.png"></div>
<div>We are entering the <em>GOLDEN AGE</em> of web mapping:</div>
<div>There are <em>libraries</em> and <em>APIs</em> and <em>tutorials</em> to help you translate these map types to the web.</div>
<div>... (but only a subset of these are easy with out-of-the box tools)</div>
<div><em>Historically</em> web mapping has evolved without much <em>cartographic theory</em>...</div>
<div>There was <em>Google</em> and then there were <em>mashups</em></div>
<div><table><tr><td><img src="mashup.jpg"></td><td><a href="http://www.programmableweb.com/news/5-years-ago-today-web-mashup-was-born/2010/04/08">HousingMaps.com</a>, by Paul Rademacher, 2005</tr></table></div>
<div>... which led to an <em>explosion</em> in special thematic maps</div>
<div><img src="../session-2/cats.png"></div>
<div>... and also this question in the minds of many cartographers:</div>
<div><table><tr><td><img src="wings.gif"></td><td><img src="hummingbird.jpg"></td><td><img src="butterfly.jpg"></td></tr><tr colspan=3>Are web maps and print maps <em>homologous</em> or <em>analagous</em>?</table></div>
<div><ul><li><a href="http://en.wikipedia.org/wiki/Dot_distribution_map#One-to-one" target="_blank">one-to-one dot maps</a></li><li><a href="http://en.wikipedia.org/wiki/Choropleth_map" target="_blank">choropleth</a> or <a href="http://wiki.gis.com/wiki/index.php/Chorochromatic_Maps" target="_blank">chorochromatic</a> maps</li><li>'<a href="http://xkcd.com/1138/" target="_blank">heatmaps</a>'</li></ul></div>
<div><img src="webdotmap.png"></div>
<div><img src="poly.png"></div>
<div><img src="heatmap.png"></div>
<div>I am not fond of heat maps.</div>
<div>The term '<em>heatmap</em>' is imprecise. Isopleth? Point density? Interpolation?</div>
<div><img src="interpolation.png"></div>
<div>On the web it usually means <em>kernel density</em> and usually just shows <a href="http://xkcd.com/1138/" target="_blank">population density</a></div>
<div><img src="heatmap_xkcd.png"></div>
<div>Where the points are sparse or coincident, <em>kernel density</em> generates a meaningless blur:</div>
<div><table><tr><td><img src="hmblur2.png"></td></tr><tr><td><img src="hmblur.png"></td></tr></table></div>
<div>Common Js libraries that generate 'heatmaps' dynamically use zoom level as a proxy for kernel size, which <em>makes no sense</em> analytically.</div>
<div><img src="kerneldensity.png"></div>
<div>The default color scheme is horrid (nicknames: "<em>Tacky Angry Rainbow</em>" and "<em>Angry Fruit Salad</em>").</div>
<div><figure><img src='tackyangryrainbow.png' alt='Tacky Angry Rainbow' /><figcaption>Tacky Angry Rainbow</figcaption></figure></div>
<div><figure><img src='arbitraryheatmap.png' alt='Angry Fruit Salad' /><figcaption>Angry Fruit Salad</figcaption></figure></div>
<div>They arise from demand from people who don't know what they are doing, but know they want to show a lot of points on a map.</div>
<div>Alternative: clustering</div>
<div><img src="googlegeo.png"></div>
<div>Entirely different although it looks similar: <a href="http://support.esri.com/en/knowledgebase/GISDictionary/term/dot%20density%20map">dot density maps</a></div>
<div><iframe src="http://demographics.coopercenter.org/DotMap/index.html" width="1200" height="800" frameborder="0" scrolling="no"></iframe></div>
<div>Someone clever putting a lot of points on maps quite artfully: <a href="https://www.flickr.com/photos/walkingsf/sets/">Eric Fischer</a></div>
<div><table><tr><td><img src="enf_nyc.jpg"></td></tr></table></div>
<div><table><tr><td><img src="enf_london.jpg"></td></tr></table></div>
<div><table><tr><td><img src="enf_sf.jpg"></td></tr></table></div>
<div>In general all of these examples follow certain <em>slippy map</em> and <em>mashup</em> paradigms, which we talked about last time.</div>
<div><img src="../session-2/anatomy/anatomy-of-a-web-map.png"></div>
<div>The <em>hottest</em> other option right now is <em>D3</em>.</div>
<div>D3 is a <em>Javascript library</em> built for data visualization.</div>
<div>In all the best and worst ways:</div>
<div><img src="../session-2/anatomy/d3-examples/geo.png">D3</div>
<div><img src="../session-2/anatomy/d3-examples/racial-divide.png">IS</div>
<div><img src="../session-2/anatomy/d3-examples/topojson.png">IN</div>
<div><img src="../session-2/anatomy/d3-examples/drought.png">SANE</div>
<div>If you want to learn D3, <a href="https://twitter.com/alignedleft">Scott Murray</a> who <a href="http://www.usfca.edu/Faculty/Scott_Murray/">teaches at USF</a> has some <a href="http://alignedleft.com/tutorials/d3">great resources</a>.</div>
<div>I also like <a href="https://www.dashingd3js.com/">DashingD3js.com</a></div>
<div>...there are other mapping libraries out there that can handle different projections, distortions, and animations... plus <a href="http://gis.stackexchange.com/questions/8032/how-do-various-javascript-mapping-libraries-compare">whatever else you want to do</a>.</div>
<div>We should still strive for sound <em>cartography</em> in <em>mashups</em>.</div>
<div>A few high level concepts from cartography, which is a <em>visual</em> enterprise:</div>
<div>1. Visual variables</div>
<div><table><tr><td><img src="visual_variables.png"></td></tr></table></div>
<div><table><tr><td><img src="visual_variables2.png"></td></tr></table></div>
<div>2. Visual hierarchy</div>
<div><table><tr><td><img src="82_congo_elements_plopped.gif"></td><td>BAD<br>←<br><br>GOOD <br>→ </td><td><img src="83_congo_portrait.gif"></td></tr></table></div>
<div>3. Visual argument</div>
<div><table><tr><td><img src="visual_argument.png"></td></tr></table></div>
<div>An important concept for web cartography is "<em>screen real-estate</em>"</div>
<div><table><tr><td><img src="phonemap.jpg"></td></tr></table></div>
<div><ul><li>Space is scarce</li><li>Mobile vs. desktop</li><li>Fluid vs. compartmentalized layout</li></div>
<div>Slippy map is a way around all of this but.... for some maps it is overkill & potentially a cop-out.</div>
<div><iframe src="http://leafletjs.com/examples/choropleth-example.html" width="1200" height="800" frameborder="0" scrolling="no"></iframe></div>
<div>The main thing the web brings to cartography is <em>interactivity</em>, which can take many forms.</div>
<div>In web design and development, people make entire careers out of designing for interactivity. The field is called <em>UI/UX</em>, which is shorthand for <em>user interface and user experience</em>.</div>
<div>It means you think through how people who visit your site will interact with it, and you design the <em>interface</em> to guide the user toward the <em>experience</em> you want them to have.</div>
<div>UI/UX is a really important component of web mapping.</div>
<div>Project managers creating government web portals for geospatial data, I am talking to you.</div>
<div>For this reason, while it makes sense in print cartography to talk about <em>map readers</em>, in web cartography we talk about <em>map users</em>.</div>
<div>In our first session, we saw some forms of interactivity that are <em>standard</em> in out of the box tools.</div>
<div>Panning & Zooming</div>
<div><table><tr><td><img src="panzoom.png"></td></tr></table></div>
<div>Info Boxes</div>
<div><table><tr><td><img src="infobox.png"></td></tr></table></div>
<div>Tooltips</div>
<div><iframe src="http://www.greenpeace.org/international/Global/international/code/2012/marine-reserves-map/index.html" width="1200" height="800" frameborder="0" scrolling="no"></iframe></div>
<div>Highlighting</div>
<div><iframe src="http://cf.datawrapper.de/YI8Ha/22/" frameborder="0" allowtransparency="true" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen width="800" height="600"></iframe></div>
<div>Charts</div>
<div><table><tr><td><img src="chart.png"></td></tr></table></div>
<div>Embedded images/video</div>
<div><table><tr><td><img src="embed.png"></td></tr></table></div>
<div>Geocode box</div>
<div><table><tr><td><img src="geocode.png"></td></tr></table></div>
<div>"Zoom to my location" button</div>
<div><table><tr><td><img src="gotolocation.png"></td></tr></table></div>
<div>Animation</div>
<div><iframe src="http://cartodb.github.com/oldweather_wwi/" width="1000" height="800" frameborder="0" scrolling="no"></iframe></div>
<div>All these <em>whizz-bangs</em> are neato!</div>
<div>Let's play with a web map: In Chrome go to: <a href="http://leafletjs.com/examples/mobile.html">leafletjs.com/examples/mobile.html</a></div>
<div>Click on Menu > Tools > View Source & copy/paste all the text you see into a text editor.</div>
<div>File > Save As > mobile.html <br>(remember where you save it!)</div>
<div>This tutorial uses a function from the Leaflet library to zoom to your approximate location.</div>
<div>To make it work, you probably need a <em>web server</em> running.</div>
<div>If you are on a mac or a Windows or Linux machine with Python installed and globally available, type: <br><em>python -m SimpleHTTPServer</em></div>
<div><table><tr><td><img src="simplehttpserver.png"></table></tr></td></div>
<div>Type "<em>localhost:8000</em>" into an new browser window & navigate to where you saved mobile.html</div>
<div>We'll go through it chunk by chunk.</div>
<div>Can you figure out how to switch the basemap to the Stamen toner tiles we used last week?</div>
<div>CartoCSS</div>
<div>For example:</div>
<div><img src="cartocss.png"></div>
<div>CartoCSS is based on CSS. Some things to understand:<ul><li>Just like with CSS, rules are applied in order. Later ones overwrite earlier ones.</li><li>There are <em>#selectors</em> which are like layers.</li><li>You can display your data as <em>points</em> or <em>lines</em> or <em>text</em> depending on what <em>symbolizer</em> you use.</li></ul></div>
<div>Thanks everyone! See you on the interwebs: <em>@mizmay</em>....</div>
<div>Presentation made with <a href="http://www.macwright.org/big/">big</a></div>
</body></html>
